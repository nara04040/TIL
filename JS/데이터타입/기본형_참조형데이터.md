# 불변값

변수와 상수를 구분하는 성질은 **"변경 가능성"** 입니다.

바꿀 수 없으면 **"변수"**, 바꿀 수 없으면 **"상수"** 입니다.

변수와 상수를 구분 짓는 변경 가능성의 대상은 **변수 영역 메모리**이다.

한 번 데이터 할당이 이뤄진 변수 공간에 다른 데이터를 재할당 할 수 있는지 없는지가 중요하다.

불변성 여부를 구분할 때는 데이터 영역의 메모리이다.

기본형 데이터(Number,boolean,null,undefined,Symbol)은 모두 **불변값**입니다.

```javascript
var a = "abc"
a = a + "def";

var b = 5;
var c = 5;

b = 7
```

변수 a 에 'abc'를 할당한뒤 'def'를 추가하면 'abcdef'로 바뀌는 것이 아니라, 새로운 문자열인 'abcdef'를 만들어서 그 주소를 변수 a에다가 저장하는 형식이다.

즉 'abc'와 'abcdef'는 완전히 **별개의 데이터**이다.


var b 를 보자. 일단 데이터 영역에서 5를 찾는다. 이후 없으면 데이터 공간을 하나 만들어서 저장한다. 그리고 주소를 b에 저장한다.

이후 var c에서 5를 할당하려고한다. 이때 컴퓨터는 데이터 영역에서 5를 찾아내고 이미 만들어낸 b가 있기때문에 **주소를 재활용**한다.


b = 7를 보자, 변수 b의 값을 바꾸려고한다. 기존에 저장된 5자체를 7로 바꾸는게 아니라 저장되어있던 7이 있다면 재활용하고, 없다면 새로 만들어서 b에 저장한다. 결국 5와 7 모두 다른값이므로 변경을 할 수가 없다.

변경은 새로 만드는 동작을 통해서만 이뤄지고 이것이 **불변값의 성질이다.**

한번 만들어진 값은 갈비지 컬렉팅에 당하지 않는 한 불변하다.

<br>
<br>

# 가변값

기본형 데이터는 모두 불변값이라고 말했으니 참조형 데이터는 모두 가변값일까?

참조형은 기본적인 성질로 가변값인 경우가 많지만 **설정에 따라 변경 불가능한 경우**도있다.

참조형 데이터를 변수에 할당하는 과정을 알아보자.

```javascript
var obj1 = {
    a : 1,
    b : 'bbb'
}
obj1.a = 2;
```

1. 컴퓨터는 변수영역의 빈공간(@1002)를 확보한다. 주소이름을 obj1으로 저장한다.
2. 데이터 저장공간(@5001)에 저장할려고한다. 하지만 여러 개의 프로퍼티로 이뤄져있는 데이터 그룹이므로 별도의 저장영역을 마련하고 그 영역의 주소(@7103)을 @5001에 저장한다  
3. @7103 , @7104는 a,b라는 프로퍼티 이름을 지정한다.
4. 데이터 영역에 1을 검색한다. 검색 결과가 없으므로 @5003에 저장하고 주소를 @7103에 저장한다.
5. 문자열 'bbb'도 검색결과에 없으므로 @5004에 저장하고 주소를 @7104에 저장한다.
<br>

기본형 데이터와 차이는 **객체의 변수 영역** 별도로 존재한다는 점이다.

객체가 별도로 지정한 영역은 변수 영역일뿐 "데이터 영역"의 기존 메모리 공간을 그대로 활용한다.

데이터 영역에 저장된 값은 불변값이지만 변수에는 다른 값을 얼마든지 대입할 수 있다는 말이다.

이때 나오는 말이 참조형 데이터는 불변하지 않는다, 또는 가변값이다. 라고 말하는 것이다.

<br>

이번에는 obj1.a = 2 를 바라보자. 숫자 2를 할당할려고 하고있자 데이터 영역에서 숫자 2를 검색한다.

검색 결과가 없기에 빈 공간인 @5005에 저장하고 이 주소를 @7103에 저장한다.즉 obj1이 바라보고있는 @5001이 변하지 않는다.
새로운 객체가 만들어지는 것이 아니라 객체 내부의 값만 바뀐것이다.

## 중첩객체
참조형 데이터의 프로퍼티에 다시 참조형 데이터를 할당하는 경우를 **중첩객체**라고 부른다.

```javascript
var obj = {
    x : 3,
    arr : [3,4,5]
}
```

위 코드가 선언되는 과정을 지켜보자.

1. 변수영역에 빈공간 (@1002)를 확보하고 주소이름을 obj로 지정한다.
2. 데이터공간(@5001)에 데이터를 저장할려고 하지만 데이터는 변수와 값들을 모아놓는 그룹(객체)이다. <br> 각 변수를 저장하기위해 변수 영역(@7103 ~ ?)을 마련하고 그 영역 주소를 @5001에 저장한다.
3. @7103에 이름 x를 @7104에 이름 arr를 지정한다.
4. x : 3이기에 데이터 영역에서 3을 검색한다. 없으므로 @5002에 저장하고 이 주소를 @7103에 저장.
5. @7104에 저장할 값은 배열로서 객체와 같은 그룹이다. 별도의 변수 영역을 만들고 (@8104 ~ ?) 영역의 주소 정보를 @5003에 저장한다. 이후 @5003 을 @7104에 저장한다.
6. 배열의 요소가 총 3개다. 변수 공간을 확보하고 각 인덱스를 부여한다.
7. 데이터 영역에서 3을 검색한다. 존재하므로 주소를 @8104에 부여한다.
8. 데이터 영역에서 4를 검색한다. 존재하지 않으므로 @5003에 저장하고 이 주소를 @8105에 저장한다.
9. 데이터 영역에서 5를 검색한다. 존재하지 않으므로 @5004에 저장하고 이 주소를 @8106에 저장한다.

<br>

이때 obj.arr[1]을 검색하고자하면 검색과정은

-> @1002 -> @5001 -> (@7103 ~ ?) -> @7104 -> @5003 -> (@8104 ~ ?) -> @8105 -> @5004 -> 반환

 