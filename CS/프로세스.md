# 프로세스

프로세스는 운영체제로부터 메모리 공간을 할당 받아 **_실행 중인 프로그램_** 이다. <br>
이때 할당되는 메모리공간을 4가지로 나눠서 부른다.

<br>

### 프로세스에 할당되는 메모리 공간

> ### **코드 , 데이터 , 힙 , 스택**

<br>

- 코드 : 프로세스가 실행할 코드들이 기계어 형태로 저장된 공간 <br>
  컴파일 타임에 의해서 결정되고, 수정이 불가

- 데이터 영역 : 전역변수 , static변수등이 저장되는 공간이다. <br>
  전역, static변수를 참조한 코드는 컴파일하고 나면 데이터 영역의 주소값을 가르킨다. <br>
  컴파일 타임에 의해서 결정된다. 실행도중에 변경도 된다! <br>

- 힙 : 프로그래머가 관리하는 영역, 힙에는 메모리를 할당하는 것을 **동적 할당** 이라고 부른다. <br>
  런타임에 의해서 결정된다. <br>
  공간은 많으나 읽고쓰기가 느림
- 스택 : 함수 안에서 선언된 지역변수, 매개변수, 리턴값, 복귀 주소 등이 저장된다. <br>
  스택의 LIFO방식에 따라 함수를 호출하고 종료되면 제거한다. <br>
  컴파일 타임에 의해 결정.
  정해진 크기가 있어서 stack overflow가 날수있다.

<br>

### 프로세스 제어 블록 (PCB)

PCB는 특정 프로세스에 대한 정보를 담고있는 자료구조이다. <br>
프로세스는 운영체제의 알고리즘에 따라서 CPU를 할당받고 , 작업을 진행중 프로세스간의 전환이 발생하면 작업을 저장하고 CPU를 반환해야한다. <br>
이후 스케줄링에 의해서 다시 실행되었을때는 작업이 어디까지 지행되었는지 그 정보를 알아야한다. <br>
이때 이 정보가 담긴 공간이 "**PCB**" 라고 한다. <br>
프로세스 생성과 동시에 그 프로세스의 고유한 PCB도 함께 생성된다.

<br>

### 프로세스 제어 블록(PCB)에 저장되는 정보

- 프로세스 식별자 (Process ID, PID)
- 프로세스 상태 (Process state) : new, ready, running, waiting, terminated
- 프로그램 카운터 (Program counter) : 프로세스가 다음에 실행할 명령어의 주소를 가르킴
- CPU 레지스터 : Accumulator, Indexx Register, 범용 레지스터 등
- CPU 스케줄링 정보 : 프로세스 우선순위, 최종 실행 시각, CPU 점유 시간 등
- 메모리 관리 정보 : Page table, Segment table 등
- 계정 정보 : CPU 사용시간, 제한시간, 계정번호 등
- 입출력 상태 정보 : 프로세스에 할당된 입출력 장치, 개방된 파일 목록 등

### 스레드(Thread)

스레드는 프로세스를 구성하는 독립적인 실행단위다. <br>
스레드는 같은 프로세스 내 다른 스레드와 메모리 영역을 공유가 가능하다.

- 스레드도 하나의 실행 흐름이므로 실행과 관련된 데이터가 필요하다.
  - 독립적 : 각 스레드는 자신만의 고유한 **스레드 ID, 프로그램 카운터 (PC), 레지스터 집합, 스택 영역**을 가진다.
  - 공유 : 그리고 **속한 프로세스 내의 코드/데이터/힙 영역과 기타 운영체제 자원 (열린 파일, 신호 등)** 을 다른 스레드와 공유한다.
- 각 스레드는 스택 영역을 통해 독립적인 실행 흐름을 가진다.
- 스레드는 프로세스 메모리 영역을 공유하기 때문에 어떤 스레드 하나에서 오류가 발생하면 같은 프로세스 내의 다른 스레드 모두가 강제로 종료된다. (프로세스는 한 프로세스가 강제 종료되어도 공유 자원을 손상시키는 경우가 아니라면 다른 프로세스에게 영향을 주지 않는다.)
